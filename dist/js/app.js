function setupSpoonflowerApi(){function t(t){var e=$.Deferred(),a=$.ajax({url:t,dataType:"jsonp",jsonpCallback:"callback",beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa("demo:irondemo"))},timeout:5e3,success:function(t){e.resolve(t)},error:function(t){e.reject(a,"Unknown error",t)}});return e}var e="http://api.v1.spoonflower.com/design/",a="40",o={getPopularList:function(){var o="&sort=freshtastic",i=e+"search?limit="+a+o+"&jsonp=callback";return t(i)},getDesignBySearch:function(o,i,c){var l=e+"search?"+o+"&"+i+"&"+c+"&limit="+a+"&jsonp=callback";return console.log(l),t(l)}};return o}var app={};!function(t){var e=function(){var e='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>',a={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},l=function(e,a){var o=c(e);t(a).data("colpick").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},n=function(e,a){t(a).data("colpick").fields.eq(4).val(Math.round(e.h)).end().eq(5).val(Math.round(e.s)).end().eq(6).val(Math.round(e.b)).end()},s=function(e,a){t(a).data("colpick").fields.eq(0).val(r(e))},d=function(e,a){t(a).data("colpick").selector.css("backgroundColor","#"+r({h:e.h,s:100,b:100})),t(a).data("colpick").selectorIndic.css({left:parseInt(t(a).data("colpick").height*e.s/100,10),top:parseInt(t(a).data("colpick").height*(100-e.b)/100,10)})},p=function(e,a){t(a).data("colpick").hue.css("top",parseInt(t(a).data("colpick").height-t(a).data("colpick").height*e.h/360,10))},u=function(e,a){t(a).data("colpick").currentColor.css("backgroundColor","#"+r(e))},h=function(e,a){t(a).data("colpick").newColor.css("backgroundColor","#"+r(e))},f=function(){var e,a=t(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?(a.data("colpick").color=e=o(j(this.value)),l(e,a.get(0)),n(e,a.get(0))):this.parentNode.className.indexOf("_hsb")>0?(a.data("colpick").color=e=q({h:parseInt(a.data("colpick").fields.eq(4).val(),10),s:parseInt(a.data("colpick").fields.eq(5).val(),10),b:parseInt(a.data("colpick").fields.eq(6).val(),10)}),l(e,a.get(0)),s(e,a.get(0))):(a.data("colpick").color=e=i(P({r:parseInt(a.data("colpick").fields.eq(1).val(),10),g:parseInt(a.data("colpick").fields.eq(2).val(),10),b:parseInt(a.data("colpick").fields.eq(3).val(),10)})),s(e,a.get(0)),n(e,a.get(0))),d(e,a.get(0)),p(e,a.get(0)),h(e,a.get(0)),a.data("colpick").onChange.apply(a.parent(),[e,r(e),c(e),a.data("colpick").el,0])},v=function(){t(this).parent().removeClass("colpick_focus")},g=function(){t(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),t(this).parent().addClass("colpick_focus")},k=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a=t(this).parent().find("input").focus(),o={el:t(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:a,val:parseInt(a.val(),10),preview:t(this).parent().parent().data("colpick").livePreview};t(document).mouseup(o,_),t(document).mousemove(o,m)},m=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val-t.pageY+t.data.y,10)))),t.data.preview&&f.apply(t.data.field.get(0),[!0]),!1},_=function(e){return f.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colpick_slider").find("input").focus(),t(document).off("mouseup",_),t(document).off("mousemove",m),!1},b=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a={cal:t(this).parent(),y:t(this).offset().top};t(document).on("mouseup touchend",a,w),t(document).on("mousemove touchmove",a,y);var o="touchstart"==e.type?e.originalEvent.changedTouches[0].pageY:e.pageY;return f.apply(a.cal.data("colpick").fields.eq(4).val(parseInt(360*(a.cal.data("colpick").height-(o-a.y))/a.cal.data("colpick").height,10)).get(0),[a.cal.data("colpick").livePreview]),!1},y=function(t){var e="touchmove"==t.type?t.originalEvent.changedTouches[0].pageY:t.pageY;return f.apply(t.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.y)))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},w=function(e){return l(e.data.cal.data("colpick").color,e.data.cal.get(0)),s(e.data.cal.data("colpick").color,e.data.cal.get(0)),t(document).off("mouseup touchend",w),t(document).off("mousemove touchmove",y),!1},x=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a={cal:t(this).parent(),pos:t(this).offset()};a.preview=a.cal.data("colpick").livePreview,t(document).on("mouseup touchend",a,I),t(document).on("mousemove touchmove",a,C);var o;return"touchstart"==e.type?(pageX=e.originalEvent.changedTouches[0].pageX,o=e.originalEvent.changedTouches[0].pageY):(pageX=e.pageX,o=e.pageY),f.apply(a.cal.data("colpick").fields.eq(6).val(parseInt(100*(a.cal.data("colpick").height-(o-a.pos.top))/a.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-a.pos.left)/a.cal.data("colpick").height,10)).get(0),[a.preview]),!1},C=function(t){var e;return"touchmove"==t.type?(pageX=t.originalEvent.changedTouches[0].pageX,e=t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,e=t.pageY),f.apply(t.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.pos.top)))/t.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(t.data.cal.data("colpick").height,pageX-t.data.pos.left))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},I=function(e){return l(e.data.cal.data("colpick").color,e.data.cal.get(0)),s(e.data.cal.data("colpick").color,e.data.cal.get(0)),t(document).off("mouseup touchend",I),t(document).off("mousemove touchmove",C),!1},S=function(){var e=t(this).parent(),a=e.data("colpick").color;e.data("colpick").origColor=a,u(a,e.get(0)),e.data("colpick").onSubmit(a,r(a),c(a),e.data("colpick").el)},M=function(e){e.stopPropagation();var a=t("#"+t(this).data("colpickId"));a.data("colpick").onBeforeShow.apply(this,[a.get(0)]);var o=t(this).offset(),i=o.top+this.offsetHeight,c=o.left,l=T(),r=a.width();c+r>l.l+l.w&&(c-=r),a.css({left:c+"px",top:i+"px"}),0!=a.data("colpick").onShow.apply(this,[a.get(0)])&&a.show(),t("html").mousedown({cal:a},$),a.mousedown(function(t){t.stopPropagation()})},$=function(e){0!=e.data.cal.data("colpick").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),t("html").off("mousedown",$)},T=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth)}},q=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},P=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},j=function(t){var e=6-t.length;if(e>0){for(var a=[],o=0;e>o;o++)a.push("0");a.push(t),t=a.join("")}return t},D=function(){var e=t(this).parent(),a=e.data("colpick").origColor;e.data("colpick").color=a,l(a,e.get(0)),s(a,e.get(0)),n(a,e.get(0)),d(a,e.get(0)),p(a,e.get(0)),h(a,e.get(0))};return{init:function(c){if(c=t.extend({},a,c||{}),"string"==typeof c.color)c.color=o(c.color);else if(void 0!=c.color.r&&void 0!=c.color.g&&void 0!=c.color.b)c.color=i(c.color);else{if(void 0==c.color.h||void 0==c.color.s||void 0==c.color.b)return this;c.color=q(c.color)}return this.each(function(){if(!t(this).data("colpickId")){var a=t.extend({},c);a.origColor=c.color;var o="collorpicker_"+parseInt(1e3*Math.random());t(this).data("colpickId",o);var i=t(e).attr("id",o);i.addClass("colpick_"+a.layout+(a.submit?"":" colpick_"+a.layout+"_ns")),"light"!=a.colorScheme&&i.addClass("colpick_"+a.colorScheme),i.find("div.colpick_submit").html(a.submitText).click(S),a.fields=i.find("input").change(f).blur(v).focus(g),i.find("div.colpick_field_arrs").mousedown(k).end().find("div.colpick_current_color").click(D),a.selector=i.find("div.colpick_color").on("mousedown touchstart",x),a.selectorIndic=a.selector.find("div.colpick_selector_outer"),a.el=this,a.hue=i.find("div.colpick_hue_arrs"),huebar=a.hue.parent();var r=navigator.userAgent.toLowerCase(),m="Microsoft Internet Explorer"===navigator.appName,_=m?parseFloat(r.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,y=m&&10>_,w=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(y){var C,I;for(C=0;11>=C;C++)I=t("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+w[C]+", endColorstr="+w[C+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+w[C]+", endColorstr="+w[C+1]+')";'),huebar.append(I)}else stopList=w.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");i.find("div.colpick_hue").on("mousedown touchstart",b),a.newColor=i.find("div.colpick_new_color"),a.currentColor=i.find("div.colpick_current_color"),i.data("colpick",a),l(a.color,i.get(0)),n(a.color,i.get(0)),s(a.color,i.get(0)),p(a.color,i.get(0)),d(a.color,i.get(0)),u(a.color,i.get(0)),h(a.color,i.get(0)),a.flat?(i.appendTo(this).show(),i.css({position:"relative",display:"block"})):(i.appendTo(document.body),t(this).on(a.showEvent,M),t(this).on("focus",M),i.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){t(this).data("colpickId")&&M.apply(this)})},hidePicker:function(){return this.each(function(){t(this).data("colpickId")&&t("#"+t(this).data("colpickId")).hide()})},setColor:function(e,a){if(a="undefined"==typeof a?1:a,"string"==typeof e)e=o(e);else if(void 0!=e.r&&void 0!=e.g&&void 0!=e.b)e=i(e);else{if(void 0==e.h||void 0==e.s||void 0==e.b)return this;e=q(e)}return this.each(function(){if(t(this).data("colpickId")){var o=t("#"+t(this).data("colpickId"));o.data("colpick").color=e,o.data("colpick").origColor=e,l(e,o.get(0)),n(e,o.get(0)),s(e,o.get(0)),p(e,o.get(0)),d(e,o.get(0)),h(e,o.get(0)),o.data("colpick").onChange.apply(o.parent(),[e,r(e),c(e),o.data("colpick").el,1]),a&&u(e,o.get(0))}})}}}(),a=function(t){var t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return{r:t>>16,g:(65280&t)>>8,b:255&t}},o=function(t){return i(a(t))},i=function(t){var e={h:0,s:0,b:0},a=Math.min(t.r,t.g,t.b),o=Math.max(t.r,t.g,t.b),i=o-a;return e.b=o,e.s=0!=o?255*i/o:0,e.h=0!=e.s?t.r==o?(t.g-t.b)/i:t.g==o?2+(t.b-t.r)/i:4+(t.r-t.g)/i:-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},c=function(t){var e={},a=t.h,o=255*t.s/100,i=255*t.b/100;if(0==o)e.r=e.g=e.b=i;else{var c=i,l=(255-o)*i/255,r=(c-l)*(a%60)/60;360==a&&(a=0),60>a?(e.r=c,e.b=l,e.g=l+r):120>a?(e.g=c,e.b=l,e.r=c-r):180>a?(e.g=c,e.r=l,e.b=l+r):240>a?(e.b=c,e.r=l,e.g=c-r):300>a?(e.b=c,e.g=l,e.r=l+r):360>a?(e.r=c,e.g=l,e.b=c-r):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},l=function(e){var a=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(a,function(t,e){1==e.length&&(a[t]="0"+e)}),a.join("")},r=function(t){return l(c(t))};t.fn.extend({colpick:e.init,colpickHide:e.hidePicker,colpickShow:e.showPicker,colpickSetColor:e.setColor}),t.extend({colpick:{rgbToHex:l,rgbToHsb:i,hsbToHex:r,hsbToRgb:c,hexToHsb:o,hexToRgb:a}})}(jQuery),app.showInitialPage=function(){document.body.insertAdjacentHTML("beforeend","<h2>TODO: Remove example.js</h2><p>And change init.js to do whatevz you need</p>")},app.search=$(function(){function t(){return n=JSON.parse(localStorage.getItem("pastSearches")||"[]")}function e(t){return t.map(function(t){var e=t.keywordSearch,a=t.colorSearch,o=t.productSearch.slice(10),i=$('<span class="color-block"></span>');i.css("background-color","#"+a);var c=$('<li class="past-search-item"></li>');return c.attr("data-keyword",e),c.attr("data-color",a),c.attr("data-product",t.productSearch),c.append(o+" "),c.append(e+" "),c.append(i),c[0]})}function a(){n=t(),0===n.length?$(".past-searches-list").empty().append('<li class="past-search-item">You don\'t currently have any past searches</li>'):(searchItems=e(n),$(".past-searches-list").empty().append(searchItems))}function o(){$(".past-searches-list").on("click",".past-search-item",function(){var t=$(this),e="",a=t.attr("data-keyword");""!==a&&(e="q="+a);var o="",i=t.attr("data-color");""!==i&&(o="color1="+i);var c="",r=t.attr("data-product");""!==r&&(c=r),l(e,o,c)})}function i(){Api.getPopularList().done(function(t){var e=t.results[0].results,a=r(e);$(".results-list").empty().append(a)})}function c(){$(".new-search").submit(function(t){function e(){n.indexOf(d)<0&&n.unshift(d),n.length>5&&n.pop(),localStorage.setItem("pastSearches",JSON.stringify(n))}t.preventDefault();var a="",o=$(".keyword").val();""!==o&&(a="q="+o);var i="",c=$(".color").val();""!==c&&(i="color1="+c);var r="",s=$(".product-section input[type=radio]:checked");s.length>0&&(r="substrate="+s.val());var d={keywordSearch:o,colorSearch:c,productSearch:r};e(),l(a,r,i)})}function l(t,e,a){Api.getDesignBySearch(t,e,a).done(function(t){var e=t.results[0].results,a=r(e);0===e.length?($(".results-list").empty().append('<i class="fa fa-frown-o"></i> There are no fabrics matching your search. Please try again.'),$(".results-list").addClass("error")):$(".results-list").empty().append(a)})}function r(t){return t.map(function(t){var e=$("<img>");e.attr("data-id",t.id),e.attr("src",t.thumbnail_url);var a=$('<div class="design-img-container"></div>');a.append(e);var o=$('<div class="design-name-container"><h3 class="design-name">'+t.name+"</h3></div>"),i=$('<div class="designer-container"><span class="designer">by '+t.user.screen_name+"</span></div>"),c=$('<div class="description-container"><p class="description">'+t.short_description+"</p></div>"),l=$("<li></li>");if(l.data("item",t),l.addClass("design-preview search-result"),l.append(a),l.append(o),l.append(i),""!==t.short_description){var r=l.append(c);return r}return l})}var n=[];t(),i(),$(".past-searches").on("click",function(t){t.stopPropagation(),a(),$(".past-searches-list").toggleClass("show"),$("body").on("click",function(t){t.stopPropagation(),$(".past-searches-list").removeClass("show")})}),o(),$(".product-label").on("click",function(){$(".product-label").removeClass("selected"),$(this).addClass("selected")}),$("#picker").colpick({layout:"hex",submit:0,colorScheme:"light",onChange:function(t,e,a,o,i){$(o).css("border-color","#"+e),i||$(o).val(e)}}).keyup(function(){$(this).colpickSetColor(this.value)}),c()});var Api=setupSpoonflowerApi();
//# sourceMappingURL=app.js.map