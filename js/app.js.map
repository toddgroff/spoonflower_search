{"version":3,"sources":["spoonflower-api.js","app.js","colpick.js","search.js"],"names":["setupSpoonflowerApi","fetchUrl","url","promise","$","Deferred","req","ajax","dataType","jsonpCallback","beforeSend","xhr","setRequestHeader","btoa","timeout","success","data","resolve","error","reject","baseUrl","limit","self","getPopularList","freshtastic","getDesignBySearch","keywordSearch","substrateSearch","colorSearch","console","log","app","colpick","tpl","defaults","showEvent","onShow","onBeforeShow","onHide","onChange","onSubmit","colorScheme","color","livePreview","flat","layout","submit","submitText","height","fillRGBFields","hsb","cal","rgb","hsbToRgb","fields","eq","val","r","end","g","b","fillHSBFields","Math","round","h","s","fillHexFields","hsbToHex","setSelector","selector","css","selectorIndic","left","parseInt","top","setHue","hue","setCurrentColor","currentColor","setNewColor","newColor","change","col","this","parent","parentNode","className","indexOf","hexToHsb","fixHex","value","get","fixHSB","rgbToHsb","fixRGB","apply","el","blur","removeClass","focus","addClass","downIncrement","ev","preventDefault","returnValue","field","find","current","max","y","pageY","preview","document","mouseup","upIncrement","mousemove","moveIncrement","min","off","downHue","offset","on","upHue","moveHue","type","originalEvent","changedTouches","downSelector","pos","upSelector","moveSelector","pageX","clickSubmit","origColor","show","stopPropagation","offsetHeight","viewPort","getViewport","calW","width","l","w","mousedown","hide","m","compatMode","window","pageXOffset","documentElement","scrollLeft","body","innerWidth","clientWidth","hex","len","length","o","i","push","join","restoreOriginal","init","opt","extend","undefined","each","options","id","random","attr","html","click","huebar","UA","navigator","userAgent","toLowerCase","isIE","appName","IEver","parseFloat","match","ngIE","stops","div","append","stopList","appendTo","position","display","showPicker","hidePicker","setColor","setCurrent","hexToRgb","substring","delta","v","t1","t2","t3","rgbToHex","toString","nr","fn","colpickHide","colpickShow","colpickSetColor","jQuery","search","loadSearches","pastSearches","JSON","parse","localStorage","getItem","pastSearchesToHtml","map","pastSearch","keyword","product","productSearch","slice","colorBlock","searchItem","pastSearchesToPage","empty","searchItems","viewPastSearch","pastSearchItem","printSearchResults","showPopularResults","Api","done","response","results","resultElements","apiResultsToHtml","runSearch","e","saveSearches","unshift","pop","setItem","stringify","checked","designItem","img","thumbnail_url","imgCont","designName","name","designer","user","screen_name","description","short_description","li","addDescription","toggleClass","bySetColor","keyup"],"mappings":"AAEA,QAAAA,uBAmBA,QAAAC,GAAAC,GACA,GAAAC,GAAAC,EAAAC,WAEAC,EAAAF,EAAAG,MAEAL,IAAAA,EACAM,SAAA,QACAC,cAAA,WAGAC,WAAA,SAAAC,GACAA,EAAAC,iBAAA,gBAAA,SAAAC,KAAA,mBAEAC,QAAA,IACAC,QAAA,SAAAC,GACAb,EAAAc,QAAAD,IAEAE,MAAA,SAAAF,GACAb,EAAAgB,OAAAb,EAAA,gBAAAU,KAGA,OAAAb,GAvCA,GAAAiB,GAAA,wCACAC,EAAA,KA0CAC,GAEAC,eAAA,WACA,GAAAC,GAAA,oBACAtB,EAAAkB,EAAA,gBAAAC,EAAAG,EAAA,iBACA,OAAAvB,GAAAC,IAGAuB,kBAAA,SAAAC,EAAAC,EAAAC,GACA,GAAA1B,GAAAkB,EAAA,UAAAM,EAAA,IACAC,EAAA,IAAAC,EAAA,UAAAP,EAAA,iBAEA,OADAQ,SAAAC,IAAA5B,GACAD,EAAAC,IAIA,OAAAoB,GC7DA,GAAAS,SCKA,SAAA3B,GACA,GAAA4B,GAAA,WACA,GACAC,GAAA,giEACAC,GACAC,UAAA,QACAC,OAAA,aACAC,aAAA,aACAC,OAAA,aACAC,SAAA,aACAC,SAAA,aACAC,YAAA,QACAC,MAAA,SACAC,aAAA,EACAC,MAAA,EACAC,OAAA,OACAC,OAAA,EACAC,WAAA,KACAC,OAAA,KAGAC,EAAA,SAAAC,EAAAC,GACA,GAAAC,GAAAC,EAAAH,EACA9C,GAAA+C,GAAAnC,KAAA,WAAAsC,OACAC,GAAA,GAAAC,IAAAJ,EAAAK,GAAAC,MACAH,GAAA,GAAAC,IAAAJ,EAAAO,GAAAD,MACAH,GAAA,GAAAC,IAAAJ,EAAAQ,GAAAF,OAEAG,EAAA,SAAAX,EAAAC,GACA/C,EAAA+C,GAAAnC,KAAA,WAAAsC,OACAC,GAAA,GAAAC,IAAAM,KAAAC,MAAAb,EAAAc,IAAAN,MACAH,GAAA,GAAAC,IAAAM,KAAAC,MAAAb,EAAAe,IAAAP,MACAH,GAAA,GAAAC,IAAAM,KAAAC,MAAAb,EAAAU,IAAAF,OAEAQ,EAAA,SAAAhB,EAAAC,GACA/C,EAAA+C,GAAAnC,KAAA,WAAAsC,OAAAC,GAAA,GAAAC,IAAAW,EAAAjB,KAGAkB,EAAA,SAAAlB,EAAAC,GACA/C,EAAA+C,GAAAnC,KAAA,WAAAqD,SAAAC,IAAA,kBAAA,IAAAH,GAAAH,EAAAd,EAAAc,EAAAC,EAAA,IAAAL,EAAA,OACAxD,EAAA+C,GAAAnC,KAAA,WAAAuD,cAAAD,KACAE,KAAAC,SAAArE,EAAA+C,GAAAnC,KAAA,WAAAgC,OAAAE,EAAAe,EAAA,IAAA,IACAS,IAAAD,SAAArE,EAAA+C,GAAAnC,KAAA,WAAAgC,QAAA,IAAAE,EAAAU,GAAA,IAAA,OAIAe,EAAA,SAAAzB,EAAAC,GACA/C,EAAA+C,GAAAnC,KAAA,WAAA4D,IAAAN,IAAA,MAAAG,SAAArE,EAAA+C,GAAAnC,KAAA,WAAAgC,OAAA5C,EAAA+C,GAAAnC,KAAA,WAAAgC,OAAAE,EAAAc,EAAA,IAAA,MAGAa,EAAA,SAAA3B,EAAAC,GACA/C,EAAA+C,GAAAnC,KAAA,WAAA8D,aAAAR,IAAA,kBAAA,IAAAH,EAAAjB,KAEA6B,EAAA,SAAA7B,EAAAC,GACA/C,EAAA+C,GAAAnC,KAAA,WAAAgE,SAAAV,IAAA,kBAAA,IAAAH,EAAAjB,KAGA+B,EAAA,WACA,GAAAC,GAAA/B,EAAA/C,EAAA+E,MAAAC,SAAAA,QACAD,MAAAE,WAAAC,UAAAC,QAAA,QAAA,GACApC,EAAAnC,KAAA,WAAA0B,MAAAwC,EAAAM,EAAAC,EAAAN,KAAAO,QACAzC,EAAAiC,EAAA/B,EAAAwC,IAAA,IACA9B,EAAAqB,EAAA/B,EAAAwC,IAAA,KACAR,KAAAE,WAAAC,UAAAC,QAAA,QAAA,GACApC,EAAAnC,KAAA,WAAA0B,MAAAwC,EAAAU,GACA5B,EAAAS,SAAAtB,EAAAnC,KAAA,WAAAsC,OAAAC,GAAA,GAAAC,MAAA,IACAS,EAAAQ,SAAAtB,EAAAnC,KAAA,WAAAsC,OAAAC,GAAA,GAAAC,MAAA,IACAI,EAAAa,SAAAtB,EAAAnC,KAAA,WAAAsC,OAAAC,GAAA,GAAAC,MAAA,MAEAP,EAAAiC,EAAA/B,EAAAwC,IAAA,IACAzB,EAAAgB,EAAA/B,EAAAwC,IAAA,MAEAxC,EAAAnC,KAAA,WAAA0B,MAAAwC,EAAAW,EAAAC,GACArC,EAAAgB,SAAAtB,EAAAnC,KAAA,WAAAsC,OAAAC,GAAA,GAAAC,MAAA,IACAG,EAAAc,SAAAtB,EAAAnC,KAAA,WAAAsC,OAAAC,GAAA,GAAAC,MAAA,IACAI,EAAAa,SAAAtB,EAAAnC,KAAA,WAAAsC,OAAAC,GAAA,GAAAC,MAAA,OAEAU,EAAAgB,EAAA/B,EAAAwC,IAAA,IACA9B,EAAAqB,EAAA/B,EAAAwC,IAAA,KAEAvB,EAAAc,EAAA/B,EAAAwC,IAAA,IACAhB,EAAAO,EAAA/B,EAAAwC,IAAA,IACAZ,EAAAG,EAAA/B,EAAAwC,IAAA,IACAxC,EAAAnC,KAAA,WAAAuB,SAAAwD,MAAA5C,EAAAiC,UAAAF,EAAAf,EAAAe,GAAA7B,EAAA6B,GAAA/B,EAAAnC,KAAA,WAAAgF,GAAA,KAGAC,EAAA,WACA7F,EAAA+E,MAAAC,SAAAc,YAAA,kBAEAC,EAAA,WACA/F,EAAA+E,MAAAC,SAAAA,SAAApE,KAAA,WAAAsC,OAAA8B,SAAAc,YAAA,iBACA9F,EAAA+E,MAAAC,SAAAgB,SAAA,kBAGAC,EAAA,SAAAC,GACAA,EAAAC,eAAAD,EAAAC,iBAAAD,EAAAE,aAAA,CACA,IAAAC,GAAArG,EAAA+E,MAAAC,SAAAsB,KAAA,SAAAP,QACAQ,GACAX,GAAA5F,EAAA+E,MAAAC,SAAAgB,SAAA,kBACAQ,IAAAzB,KAAAE,WAAAC,UAAAC,QAAA,UAAA,EAAA,IAAAJ,KAAAE,WAAAC,UAAAC,QAAA,QAAA,EAAA,IAAA,IACAsB,EAAAP,EAAAQ,MACAL,MAAAA,EACAjD,IAAAiB,SAAAgC,EAAAjD,MAAA,IACAuD,QAAA3G,EAAA+E,MAAAC,SAAAA,SAAApE,KAAA,WAAA2B,YAEAvC,GAAA4G,UAAAC,QAAAN,EAAAO,GACA9G,EAAA4G,UAAAG,UAAAR,EAAAS,IAEAA,EAAA,SAAAd,GAKA,MAJAA,GAAAtF,KAAAyF,MAAAjD,IAAAM,KAAA8C,IAAA,EAAA9C,KAAAuD,IAAAf,EAAAtF,KAAA4F,IAAAnC,SAAA6B,EAAAtF,KAAAwC,IAAA8C,EAAAQ,MAAAR,EAAAtF,KAAA6F,EAAA,OACAP,EAAAtF,KAAA+F,SACA9B,EAAAc,MAAAO,EAAAtF,KAAAyF,MAAAd,IAAA,KAAA,KAEA,GAEAuB,EAAA,SAAAZ,GAKA,MAJArB,GAAAc,MAAAO,EAAAtF,KAAAyF,MAAAd,IAAA,KAAA,IACAW,EAAAtF,KAAAgF,GAAAE,YAAA,kBAAAQ,KAAA,SAAAP,QACA/F,EAAA4G,UAAAM,IAAA,UAAAJ,GACA9G,EAAA4G,UAAAM,IAAA,YAAAF,IACA,GAGAG,EAAA,SAAAjB,GACAA,EAAAC,eAAAD,EAAAC,iBAAAD,EAAAE,aAAA,CACA,IAAAG,IACAxD,IAAA/C,EAAA+E,MAAAC,SACAyB,EAAAzG,EAAA+E,MAAAqC,SAAA9C,IAEAtE,GAAA4G,UAAAS,GAAA,mBAAAd,EAAAe,GACAtH,EAAA4G,UAAAS,GAAA,sBAAAd,EAAAgB,EAEA,IAAAb,GAAA,cAAAR,EAAAsB,KAAAtB,EAAAuB,cAAAC,eAAA,GAAAhB,MAAAR,EAAAQ,KAOA,OANA7B,GAAAc,MACAY,EAAAxD,IAAAnC,KAAA,WACAsC,OAAAC,GAAA,GAAAC,IAAAiB,SAAA,KAAAkC,EAAAxD,IAAAnC,KAAA,WAAAgC,QAAA8D,EAAAH,EAAAE,IAAAF,EAAAxD,IAAAnC,KAAA,WAAAgC,OAAA,KACA2C,IAAA,IACAgB,EAAAxD,IAAAnC,KAAA,WAAA2B,eAEA,GAEAgF,EAAA,SAAArB,GACA,GAAAQ,GAAA,aAAAR,EAAAsB,KAAAtB,EAAAuB,cAAAC,eAAA,GAAAhB,MAAAR,EAAAQ,KAOA,OANA7B,GAAAc,MACAO,EAAAtF,KAAAmC,IAAAnC,KAAA,WACAsC,OAAAC,GAAA,GAAAC,IAAAiB,SAAA,KAAA6B,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAgC,OAAAc,KAAA8C,IAAA,EAAA9C,KAAAuD,IAAAf,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAgC,OAAA8D,EAAAR,EAAAtF,KAAA6F,KAAAP,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAgC,OAAA,KACA2C,IAAA,IACAW,EAAAtF,KAAA+F,WAEA,GAEAW,EAAA,SAAApB,GAKA,MAJArD,GAAAqD,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAA0B,MAAA4D,EAAAtF,KAAAmC,IAAAwC,IAAA,IACAzB,EAAAoC,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAA0B,MAAA4D,EAAAtF,KAAAmC,IAAAwC,IAAA,IACAvF,EAAA4G,UAAAM,IAAA,mBAAAI,GACAtH,EAAA4G,UAAAM,IAAA,sBAAAK,IACA,GAGAI,EAAA,SAAAzB,GACAA,EAAAC,eAAAD,EAAAC,iBAAAD,EAAAE,aAAA,CACA,IAAAG,IACAxD,IAAA/C,EAAA+E,MAAAC,SACA4C,IAAA5H,EAAA+E,MAAAqC,SAEAb,GAAAI,QAAAJ,EAAAxD,IAAAnC,KAAA,WAAA2B,YAEAvC,EAAA4G,UAAAS,GAAA,mBAAAd,EAAAsB,GACA7H,EAAA4G,UAAAS,GAAA,sBAAAd,EAAAuB,EAEA,IAAApB,EAgBA,OAfA,cAAAR,EAAAsB,MACAO,MAAA7B,EAAAuB,cAAAC,eAAA,GAAAK,MACArB,EAAAR,EAAAuB,cAAAC,eAAA,GAAAhB,QAEAqB,MAAA7B,EAAA6B,MACArB,EAAAR,EAAAQ,OAGA7B,EAAAc,MACAY,EAAAxD,IAAAnC,KAAA,WAAAsC,OACAC,GAAA,GAAAC,IAAAiB,SAAA,KAAAkC,EAAAxD,IAAAnC,KAAA,WAAAgC,QAAA8D,EAAAH,EAAAqB,IAAAtD,MAAAiC,EAAAxD,IAAAnC,KAAA,WAAAgC,OAAA,KAAAU,MACAH,GAAA,GAAAC,IAAAiB,SAAA,KAAA0D,MAAAxB,EAAAqB,IAAAxD,MAAAmC,EAAAxD,IAAAnC,KAAA,WAAAgC,OAAA,KACA2C,IAAA,IACAgB,EAAAI,WAEA,GAEAmB,EAAA,SAAA5B,GACA,GAAAQ,EAgBA,OAfA,aAAAR,EAAAsB,MACAO,MAAA7B,EAAAuB,cAAAC,eAAA,GAAAK,MACArB,EAAAR,EAAAuB,cAAAC,eAAA,GAAAhB,QAEAqB,MAAA7B,EAAA6B,MACArB,EAAAR,EAAAQ,OAGA7B,EAAAc,MACAO,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAsC,OACAC,GAAA,GAAAC,IAAAiB,SAAA,KAAA6B,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAgC,OAAAc,KAAA8C,IAAA,EAAA9C,KAAAuD,IAAAf,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAgC,OAAA8D,EAAAR,EAAAtF,KAAAgH,IAAAtD,OAAA4B,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAgC,OAAA,KAAAU,MACAH,GAAA,GAAAC,IAAAiB,SAAA,IAAAX,KAAA8C,IAAA,EAAA9C,KAAAuD,IAAAf,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAgC,OAAAmF,MAAA7B,EAAAtF,KAAAgH,IAAAxD,OAAA8B,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAgC,OAAA,KACA2C,IAAA,IACAW,EAAAtF,KAAA+F,WAEA,GAEAkB,EAAA,SAAA3B,GAKA,MAJArD,GAAAqD,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAA0B,MAAA4D,EAAAtF,KAAAmC,IAAAwC,IAAA,IACAzB,EAAAoC,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAA0B,MAAA4D,EAAAtF,KAAAmC,IAAAwC,IAAA,IACAvF,EAAA4G,UAAAM,IAAA,mBAAAW,GACA7H,EAAA4G,UAAAM,IAAA,sBAAAY,IACA,GAGAE,EAAA,WACA,GAAAjF,GAAA/C,EAAA+E,MAAAC,SACAF,EAAA/B,EAAAnC,KAAA,WAAA0B,KACAS,GAAAnC,KAAA,WAAAqH,UAAAnD,EACAL,EAAAK,EAAA/B,EAAAwC,IAAA,IACAxC,EAAAnC,KAAA,WAAAwB,SAAA0C,EAAAf,EAAAe,GAAA7B,EAAA6B,GAAA/B,EAAAnC,KAAA,WAAAgF,KAGAsC,EAAA,SAAAhC,GAEAA,EAAAiC,iBACA,IAAApF,GAAA/C,EAAA,IAAAA,EAAA+E,MAAAnE,KAAA,aACAmC,GAAAnC,KAAA,WAAAqB,aAAA0D,MAAAZ,MAAAhC,EAAAwC,IAAA,IACA,IAAAqC,GAAA5H,EAAA+E,MAAAqC,SACA9C,EAAAsD,EAAAtD,IAAAS,KAAAqD,aACAhE,EAAAwD,EAAAxD,KACAiE,EAAAC,IACAC,EAAAxF,EAAAyF,OACApE,GAAAmE,EAAAF,EAAAI,EAAAJ,EAAAK,IACAtE,GAAAmE,GAEAxF,EAAAmB,KAAAE,KAAAA,EAAA,KAAAE,IAAAA,EAAA,OACA,GAAAvB,EAAAnC,KAAA,WAAAoB,OAAA2D,MAAAZ,MAAAhC,EAAAwC,IAAA,MACAxC,EAAAmF,OAGAlI,EAAA,QAAA2I,WAAA5F,IAAAA,GAAA6F,GACA7F,EAAA4F,UAAA,SAAAzC,GAAAA,EAAAiC,qBAEAS,EAAA,SAAA1C,GACA,GAAAA,EAAAtF,KAAAmC,IAAAnC,KAAA,WAAAsB,OAAAyD,MAAAZ,MAAAmB,EAAAtF,KAAAmC,IAAAwC,IAAA,MACAW,EAAAtF,KAAAmC,IAAA6F,OAEA5I,EAAA,QAAAkH,IAAA,YAAA0B,IAEAN,EAAA,WACA,GAAAO,GAAA,cAAAjC,SAAAkC,UACA,QACAL,EAAAM,OAAAC,cAAAH,EAAAjC,SAAAqC,gBAAAC,WAAAtC,SAAAuC,KAAAD,YACAR,EAAAK,OAAAK,aAAAP,EAAAjC,SAAAqC,gBAAAI,YAAAzC,SAAAuC,KAAAE,eAIA7D,EAAA,SAAA1C,GACA,OACAc,EAAAF,KAAAuD,IAAA,IAAAvD,KAAA8C,IAAA,EAAA1D,EAAAc,IACAC,EAAAH,KAAAuD,IAAA,IAAAvD,KAAA8C,IAAA,EAAA1D,EAAAe,IACAL,EAAAE,KAAAuD,IAAA,IAAAvD,KAAA8C,IAAA,EAAA1D,EAAAU,MAGAkC,EAAA,SAAA1C,GACA,OACAK,EAAAK,KAAAuD,IAAA,IAAAvD,KAAA8C,IAAA,EAAAxD,EAAAK,IACAE,EAAAG,KAAAuD,IAAA,IAAAvD,KAAA8C,IAAA,EAAAxD,EAAAO,IACAC,EAAAE,KAAAuD,IAAA,IAAAvD,KAAA8C,IAAA,EAAAxD,EAAAQ,MAGA6B,EAAA,SAAAiE,GACA,GAAAC,GAAA,EAAAD,EAAAE,MACA,IAAAD,EAAA,EAAA,CAEA,IAAA,GADAE,MACAC,EAAA,EAAAH,EAAAG,EAAAA,IACAD,EAAAE,KAAA,IAEAF,GAAAE,KAAAL,GACAA,EAAAG,EAAAG,KAAA,IAEA,MAAAN,IAEAO,EAAA,WACA,GAAA9G,GAAA/C,EAAA+E,MAAAC,SACAF,EAAA/B,EAAAnC,KAAA,WAAAqH,SACAlF,GAAAnC,KAAA,WAAA0B,MAAAwC,EACAjC,EAAAiC,EAAA/B,EAAAwC,IAAA,IACAzB,EAAAgB,EAAA/B,EAAAwC,IAAA,IACA9B,EAAAqB,EAAA/B,EAAAwC,IAAA,IACAvB,EAAAc,EAAA/B,EAAAwC,IAAA,IACAhB,EAAAO,EAAA/B,EAAAwC,IAAA,IACAZ,EAAAG,EAAA/B,EAAAwC,IAAA,IAEA,QACAuE,KAAA,SAAAC,GAGA,GAFAA,EAAA/J,EAAAgK,UAAAlI,EAAAiI,OAEA,gBAAAA,GAAAzH,MACAyH,EAAAzH,MAAA8C,EAAA2E,EAAAzH,WACA,IAAA2H,QAAAF,EAAAzH,MAAAe,GAAA4G,QAAAF,EAAAzH,MAAAiB,GAAA0G,QAAAF,EAAAzH,MAAAkB,EACAuG,EAAAzH,MAAAmD,EAAAsE,EAAAzH,WACA,CAAA,GAAA2H,QAAAF,EAAAzH,MAAAsB,GAAAqG,QAAAF,EAAAzH,MAAAuB,GAAAoG,QAAAF,EAAAzH,MAAAkB,EAGA,MAAAuB,KAFAgF,GAAAzH,MAAAkD,EAAAuE,EAAAzH,OAMA,MAAAyC,MAAAmF,KAAA,WAEA,IAAAlK,EAAA+E,MAAAnE,KAAA,aAAA,CACA,GAAAuJ,GAAAnK,EAAAgK,UAAAD,EACAI,GAAAlC,UAAA8B,EAAAzH,KAEA,IAAA8H,GAAA,gBAAA/F,SAAA,IAAAX,KAAA2G,SACArK,GAAA+E,MAAAnE,KAAA,YAAAwJ,EAEA,IAAArH,GAAA/C,EAAA6B,GAAAyI,KAAA,KAAAF,EAEArH,GAAAiD,SAAA,WAAAmE,EAAA1H,QAAA0H,EAAAzH,OAAA,GAAA,YAAAyH,EAAA1H,OAAA,QAEA,SAAA0H,EAAA9H,aACAU,EAAAiD,SAAA,WAAAmE,EAAA9H,aAGAU,EAAAuD,KAAA,sBAAAiE,KAAAJ,EAAAxH,YAAA6H,MAAAxC,GAEAmC,EAAAjH,OAAAH,EAAAuD,KAAA,SAAAzB,OAAAA,GAAAgB,KAAAA,GAAAE,MAAAA,GACAhD,EAAAuD,KAAA,0BAAAqC,UAAA1C,GAAA3C,MAAAgD,KAAA,6BAAAkE,MAAAX,GAEAM,EAAAlG,SAAAlB,EAAAuD,KAAA,qBAAAe,GAAA,uBAAAM,GACAwC,EAAAhG,cAAAgG,EAAAlG,SAAAqC,KAAA,8BAEA6D,EAAAvE,GAAAb,KACAoF,EAAA3F,IAAAzB,EAAAuD,KAAA,wBACAmE,OAAAN,EAAA3F,IAAAQ,QAEA,IAAA0F,GAAAC,UAAAC,UAAAC,cACAC,EAAA,gCAAAH,UAAAI,QACAC,EAAAF,EAAAG,WAAAP,EAAAQ,MAAA,+BAAA,IAAA,EACAC,EAAAL,GAAA,GAAAE,EACAI,GAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UACA,IAAAD,EAAA,CACA,GAAAzB,GAAA2B,CACA,KAAA3B,EAAA,EAAA,IAAAA,EAAAA,IACA2B,EAAArL,EAAA,eAAAsK,KAAA,QAAA,oGAAAc,EAAA1B,GAAA,iBAAA0B,EAAA1B,EAAA,GAAA,2FAAA0B,EAAA1B,GAAA,iBAAA0B,EAAA1B,EAAA,GAAA,OACAe,OAAAa,OAAAD,OAGAE,UAAAH,EAAAxB,KAAA,KACAa,OAAAH,KAAA,QAAA,0CAAAiB,SAAA,yCAAAA,SAAA,0CAAAA,SAAA,0CAAAA,SAAA,kCAAAA,SAAA,2CAAAA,SAAA,MAEAxI,GAAAuD,KAAA,mBAAAe,GAAA,uBAAAF,GACAgD,EAAAvF,SAAA7B,EAAAuD,KAAA,yBACA6D,EAAAzF,aAAA3B,EAAAuD,KAAA,6BAEAvD,EAAAnC,KAAA,UAAAuJ,GACAtH,EAAAsH,EAAA7H,MAAAS,EAAAwC,IAAA,IACA9B,EAAA0G,EAAA7H,MAAAS,EAAAwC,IAAA,IACAzB,EAAAqG,EAAA7H,MAAAS,EAAAwC,IAAA,IACAhB,EAAA4F,EAAA7H,MAAAS,EAAAwC,IAAA,IACAvB,EAAAmG,EAAA7H,MAAAS,EAAAwC,IAAA,IACAd,EAAA0F,EAAA7H,MAAAS,EAAAwC,IAAA,IACAZ,EAAAwF,EAAA7H,MAAAS,EAAAwC,IAAA,IAEA4E,EAAA3H,MACAO,EAAAyI,SAAAzG,MAAAmD,OACAnF,EAAAmB,KACAuH,SAAA,WACAC,QAAA,YAGA3I,EAAAyI,SAAA5E,SAAAuC,MACAnJ,EAAA+E,MAAAsC,GAAA8C,EAAApI,UAAAmG,GACAlI,EAAA+E,MAAAsC,GAAA,QAAAa,GACAnF,EAAAmB,KACAuH,SAAA,kBAOAE,WAAA,WACA,MAAA5G,MAAAmF,KAAA,WACAlK,EAAA+E,MAAAnE,KAAA,cACAsH,EAAAvC,MAAAZ,SAKA6G,WAAA,WACA,MAAA7G,MAAAmF,KAAA,WACAlK,EAAA+E,MAAAnE,KAAA,cACAZ,EAAA,IAAAA,EAAA+E,MAAAnE,KAAA,cAAAgI,UAKAiD,SAAA,SAAA/G,EAAAgH,GAEA,GADAA,EAAA,mBAAAA,GAAA,EAAAA,EACA,gBAAAhH,GACAA,EAAAM,EAAAN,OACA,IAAAmF,QAAAnF,EAAAzB,GAAA4G,QAAAnF,EAAAvB,GAAA0G,QAAAnF,EAAAtB,EACAsB,EAAAW,EAAAX,OACA,CAAA,GAAAmF,QAAAnF,EAAAlB,GAAAqG,QAAAnF,EAAAjB,GAAAoG,QAAAnF,EAAAtB,EAGA,MAAAuB,KAFAD,GAAAU,EAAAV,GAIA,MAAAC,MAAAmF,KAAA,WACA,GAAAlK,EAAA+E,MAAAnE,KAAA,aAAA,CACA,GAAAmC,GAAA/C,EAAA,IAAAA,EAAA+E,MAAAnE,KAAA,aACAmC,GAAAnC,KAAA,WAAA0B,MAAAwC,EACA/B,EAAAnC,KAAA,WAAAqH,UAAAnD,EACAjC,EAAAiC,EAAA/B,EAAAwC,IAAA,IACA9B,EAAAqB,EAAA/B,EAAAwC,IAAA,IACAzB,EAAAgB,EAAA/B,EAAAwC,IAAA,IACAhB,EAAAO,EAAA/B,EAAAwC,IAAA,IACAvB,EAAAc,EAAA/B,EAAAwC,IAAA,IAEAZ,EAAAG,EAAA/B,EAAAwC,IAAA,IACAxC,EAAAnC,KAAA,WAAAuB,SAAAwD,MAAA5C,EAAAiC,UAAAF,EAAAf,EAAAe,GAAA7B,EAAA6B,GAAA/B,EAAAnC,KAAA,WAAAgF,GAAA,IACAkG,GACArH,EAAAK,EAAA/B,EAAAwC,IAAA,YAQAwG,EAAA,SAAAzC,GACA,GAAAA,GAAAjF,SAAAiF,EAAAnE,QAAA,KAAA,GAAAmE,EAAA0C,UAAA,GAAA1C,EAAA,GACA,QAAAjG,EAAAiG,GAAA,GAAA/F,GAAA,MAAA+F,IAAA,EAAA9F,EAAA,IAAA8F,IAEAlE,EAAA,SAAAkE,GACA,MAAA7D,GAAAsG,EAAAzC,KAEA7D,EAAA,SAAAzC,GACA,GAAAF,IAAAc,EAAA,EAAAC,EAAA,EAAAL,EAAA,GACAyD,EAAAvD,KAAAuD,IAAAjE,EAAAK,EAAAL,EAAAO,EAAAP,EAAAQ,GACAgD,EAAA9C,KAAA8C,IAAAxD,EAAAK,EAAAL,EAAAO,EAAAP,EAAAQ,GACAyI,EAAAzF,EAAAS,CAYA,OAXAnE,GAAAU,EAAAgD,EACA1D,EAAAe,EAAA,GAAA2C,EAAA,IAAAyF,EAAAzF,EAAA,EAEA1D,EAAAc,EADA,GAAAd,EAAAe,EACAb,EAAAK,GAAAmD,GAAAxD,EAAAO,EAAAP,EAAAQ,GAAAyI,EACAjJ,EAAAO,GAAAiD,EAAA,GAAAxD,EAAAQ,EAAAR,EAAAK,GAAA4I,EACA,GAAAjJ,EAAAK,EAAAL,EAAAO,GAAA0I,EACA,GACAnJ,EAAAc,GAAA,GACAd,EAAAc,EAAA,IAAAd,EAAAc,GAAA,KACAd,EAAAe,GAAA,IAAA,IACAf,EAAAU,GAAA,IAAA,IACAV,GAEAG,EAAA,SAAAH,GACA,GAAAE,MACAY,EAAAd,EAAAc,EACAC,EAAA,IAAAf,EAAAe,EAAA,IACAqI,EAAA,IAAApJ,EAAAU,EAAA,GACA,IAAA,GAAAK,EACAb,EAAAK,EAAAL,EAAAO,EAAAP,EAAAQ,EAAA0I,MACA,CACA,GAAAC,GAAAD,EACAE,GAAA,IAAAvI,GAAAqI,EAAA,IACAG,GAAAF,EAAAC,IAAAxI,EAAA,IAAA,EACA,MAAAA,IAAAA,EAAA,GACA,GAAAA,GAAAZ,EAAAK,EAAA8I,EAAAnJ,EAAAQ,EAAA4I,EAAApJ,EAAAO,EAAA6I,EAAAC,GACA,IAAAzI,GAAAZ,EAAAO,EAAA4I,EAAAnJ,EAAAQ,EAAA4I,EAAApJ,EAAAK,EAAA8I,EAAAE,GACA,IAAAzI,GAAAZ,EAAAO,EAAA4I,EAAAnJ,EAAAK,EAAA+I,EAAApJ,EAAAQ,EAAA4I,EAAAC,GACA,IAAAzI,GAAAZ,EAAAQ,EAAA2I,EAAAnJ,EAAAK,EAAA+I,EAAApJ,EAAAO,EAAA4I,EAAAE,GACA,IAAAzI,GAAAZ,EAAAQ,EAAA2I,EAAAnJ,EAAAO,EAAA6I,EAAApJ,EAAAK,EAAA+I,EAAAC,GACA,IAAAzI,GAAAZ,EAAAK,EAAA8I,EAAAnJ,EAAAO,EAAA6I,EAAApJ,EAAAQ,EAAA2I,EAAAE,IACArJ,EAAAK,EAAA,EAAAL,EAAAO,EAAA,EAAAP,EAAAQ,EAAA,GAEA,OAAAH,EAAAK,KAAAC,MAAAX,EAAAK,GAAAE,EAAAG,KAAAC,MAAAX,EAAAO,GAAAC,EAAAE,KAAAC,MAAAX,EAAAQ,KAEA8I,EAAA,SAAAtJ,GACA,GAAAsG,IACAtG,EAAAK,EAAAkJ,SAAA,IACAvJ,EAAAO,EAAAgJ,SAAA,IACAvJ,EAAAQ,EAAA+I,SAAA,IAOA,OALAvM,GAAAkK,KAAAZ,EAAA,SAAAkD,EAAApJ,GACA,GAAAA,EAAAoG,SACAF,EAAAkD,GAAA,IAAApJ,KAGAkG,EAAAM,KAAA,KAEA7F,EAAA,SAAAjB,GACA,MAAAwJ,GAAArJ,EAAAH,IAEA9C,GAAAyM,GAAAzC,QACApI,QAAAA,EAAAkI,KACA4C,YAAA9K,EAAAgK,WACAe,YAAA/K,EAAA+J,WACAiB,gBAAAhL,EAAAiK,WAEA7L,EAAAgK,QACApI,SACA0K,SAAAA,EACA7G,SAAAA,EACA1B,SAAAA,EACAd,SAAAA,EACAmC,SAAAA,EACA2G,SAAAA,MAGAc,QCvgBAlL,IAAAmL,OAAA9M,EAAA,WAWA,QAAA+M,KAEA,MADAC,GAAAC,KAAAC,MAAAC,aAAAC,QAAA,iBAAA,MAQA,QAAAC,GAAAL,GACA,MAAAA,GAAAM,IAAA,SAAAC,GACA,GAAAC,GAAAD,EAAAjM,cACAgB,EAAAiL,EAAA/L,YACAiM,EAAAF,EAAAG,cAAAC,MAAA,IAEAC,EAAA5N,EAAA,oCACA4N,GAAA1J,IAAA,mBAAA,IAAA5B,EAEA,IAAAuL,GAAA7N,EAAA,qCASA,OARA6N,GAAAvD,KAAA,eAAAkD,GACAK,EAAAvD,KAAA,aAAAhI,GACAuL,EAAAvD,KAAA,eAAAiD,EAAAG,eAEAG,EAAAvC,OAAAmC,EAAA,KACAI,EAAAvC,OAAAkC,EAAA,KACAK,EAAAvC,OAAAsC,GAEAC,EAAA,KAIA,QAAAC,KACAd,EAAAD,IACA,IAAAC,EAAAxD,OACAxJ,EAAA,uBAAA+N,QAAAzC,OAAA,kFAEA0C,YAAAX,EAAAL,GACAhN,EAAA,uBAAA+N,QAAAzC,OAAA0C,cAcA,QAAAC,KACAjO,EAAA,uBAAAqH,GAAA,QAAA,oBAAA,WACA,GAAA6G,GAAAlO,EAAA+E,MAGAzD,EAAA,GACAkM,EAAAU,EAAA5D,KAAA,eAEA,MAAAkD,IAGAlM,EAAA,KAAAkM,EAGA,IAAAhM,GAAA,GACAc,EAAA4L,EAAA5D,KAAA,aACA,MAAAhI,IACAd,EAAA,UAAAc,EAGA,IAAAoL,GAAA,GAEAD,EAAAS,EAAA5D,KAAA,eACA,MAAAmD,IACAC,EAAAD,GAGAU,EAAA7M,EAAAE,EAAAkM,KAmBA,QAAAU,KACAC,IAAAlN,iBAAAmN,KAAA,SAAAC,GACA,GAAAC,GAAAD,EAAAC,QAAA,GAAAA,QACAC,EAAAC,EAAAF,EACAxO,GAAA,iBAAA+N,QAAAzC,OAAAmD,KA2BA,QAAAE,KACA3O,EAAA,eAAA0C,OAAA,SAAAkM,GAkCA,QAAAC,KAGA7B,EAAA7H,QAAA2H,GAAA,GACAE,EAAA8B,QAAAhC,GAGAE,EAAAxD,OAAA,GACAwD,EAAA+B,MAEA5B,aAAA6B,QAAA,eAAA/B,KAAAgC,UAAAjC,IA3CA4B,EAAAzI,gBAGA,IAAA7E,GAAA,GACAkM,EAAAxN,EAAA,YAAAoD,KACA,MAAAoK,IAGAlM,EAAA,KAAAkM,EAGA,IAAAhM,GAAA,GACAc,EAAAtC,EAAA,UAAAoD,KACA,MAAAd,IACAd,EAAA,UAAAc,EAGA,IAAAoL,GAAA,GAEAwB,EAAAlP,EAAA,6CACAkP,GAAA1F,OAAA,IACAkE,EAAA,aAAAwB,EAAA9L,MAKA,IAAA0J,IACAxL,cAAAkM,EACAhM,YAAAc,EACAoL,cAAAA,EAiBAmB,KAGAV,EAAA7M,EAAAoM,EAAAlM,KAUA,QAAA2M,GAAA7M,EAAAoM,EAAAlM,GACA6M,IAAAhN,kBAAAC,EAAAoM,EAAAlM,GAAA8M,KAAA,SAAAC,GACA,GAAAC,GAAAD,EAAAC,QAAA,GAAAA,QACAC,EAAAC,EAAAF,EACA,KAAAA,EAAAhF,QACAxJ,EAAA,iBAAA+N,QAAAzC,OAAA,8FACAtL,EAAA,iBAAAgG,SAAA,UAEAhG,EAAA,iBAAA+N,QAAAzC,OAAAmD,KASA,QAAAC,GAAAF,GAEA,MAAAA,GAAAlB,IAAA,SAAA6B,GACA,GAAAC,GAAApP,EAAA,QACAoP,GAAA9E,KAAA,UAAA6E,EAAA/E,IACAgF,EAAA9E,KAAA,MAAA6E,EAAAE,cAEA,IAAAC,GAAAtP,EAAA,2CACAsP,GAAAhE,OAAA8D,EAEA,IAAAG,GAAAvP,EAAA,8DAAAmP,EAAAK,KAAA,eAEAC,EAAAzP,EAAA,6DAAAmP,EAAAO,KAAAC,YAAA,iBAEAC,EAAA5P,EAAA,6DAAAmP,EAAAU,kBAAA,cAEAC,EAAA9P,EAAA,YAQA,IAPA8P,EAAAlP,KAAA,OAAAuO,GACAW,EAAA9J,SAAA,gCACA8J,EAAAxE,OAAAgE,GACAQ,EAAAxE,OAAAiE,GACAO,EAAAxE,OAAAmE,GAGA,KAAAN,EAAAU,kBAAA,CACA,GAAAE,GAAAD,EAAAxE,OAAAsE,EACA,OAAAG,GAGA,MAAAD,KArPA,GAAA9C,KAEAD,KAEAqB,IA+CApO,EAAA,kBAAAqH,GAAA,QAAA,SAAAuH,GACAA,EAAAzG,kBACA2F,IACA9N,EAAA,uBAAAgQ,YAAA,QACAhQ,EAAA,QAAAqH,GAAA,QAAA,SAAAuH,GACAA,EAAAzG,kBACAnI,EAAA,uBAAA8F,YAAA,YAoCAmI,IAMAjO,EAAA,kBAAAqH,GAAA,QAAA,WACArH,EAAA,kBAAA8F,YAAA,YACA9F,EAAA+E,MAAAiB,SAAA,cAkBAhG,EAAA,WAAA4B,SAEAa,OAAA,MACAC,OAAA,EACAL,YAAA,QACAF,SAAA,SAAAW,EAAAwG,EAAAtG,EAAA4C,EAAAqK,GACAjQ,EAAA4F,GAAA1B,IAAA,eAAA,IAAAoF,GAGA2G,GAAAjQ,EAAA4F,GAAAxC,IAAAkG,MAEA4G,MAAA,WACAlQ,EAAA+E,MAAA6H,gBAAA7H,KAAAO,SA+DAqJ,KHnMA,IAAAN,KAAAzO","file":"app.js","sourcesContent":["var Api = setupSpoonflowerApi();\n\nfunction setupSpoonflowerApi() {\n  var baseUrl = 'http://api.v1.spoonflower.com/design/';\n  var limit = '40';\n\n\n  // $(function () {\n  //\n  //   $.ajax({\n  //     url: 'http://api.v1.spoonflower.com/design/search?q=chevron&callback=?',\n  //     dataType: 'jsonp',\n  //     beforeSend: function (xhr) {\n  //       xhr.setRequestHeader ('Authorization', 'Basic ' + btoa('demo:irondemo'))\n  //     }\n  //   }).done(function (result) {\n  //     console.log(result);\n  //   });\n  //\n  // });\n\n  function fetchUrl(url) {\n    var promise = $.Deferred();\n    // this has to change for JSONP\n    var req = $.ajax({\n      //url property with this value\n      url: url,\n      dataType: 'jsonp',\n      jsonpCallback: 'callback',\n      //HTTP Basic Authentication... would obviously want to do something different\n      //in the long run so credentials are not accessible in the code\n      beforeSend: function (xhr) {\n        xhr.setRequestHeader ('Authorization', 'Basic ' + btoa('demo:irondemo'));\n      },\n      timeout: 5000, // fake .fail() a lot of time for the request to be successfully completed\n      success: function(data) {\n        promise.resolve(data);\n      },\n      error: function(data) {\n        promise.reject(req, 'Unknown error', data);\n      }\n    });\n    return promise;\n  }\n\n\n  var self = {\n\n    getPopularList: function() {\n      var freshtastic = '&sort=freshtastic';\n      var url = baseUrl + 'search?limit=' + limit + freshtastic + '&jsonp=callback';\n      return fetchUrl(url);\n    },\n\n    getDesignBySearch: function(keywordSearch, substrateSearch, colorSearch ) {\n      var url = baseUrl + 'search?' + keywordSearch + '&' +\n        substrateSearch + '&' + colorSearch + '&limit=' + limit + '&jsonp=callback';\n        console.log(url);\n      return fetchUrl(url);\n    }\n\n  };\n  return self;\n}\n","// The namespace for this application\nvar app = {};\n","/*\ncolpick Color Picker\nCopyright 2013 Jose Vargas. Licensed under GPL license. Based on Stefan Petre's Color Picker www.eyecon.ro, dual licensed under the MIT and GPL licenses\nFor usage and examples: colpick.com/plugin\n */\n\n(function ($) {\n\tvar colpick = function () {\n\t\tvar\n\t\t\ttpl = '<div class=\"colpick\"><div class=\"colpick_color\"><div class=\"colpick_color_overlay1\"><div class=\"colpick_color_overlay2\"><div class=\"colpick_selector_outer\"><div class=\"colpick_selector_inner\"></div></div></div></div></div><div class=\"colpick_hue\"><div class=\"colpick_hue_arrs\"><div class=\"colpick_hue_larr\"></div><div class=\"colpick_hue_rarr\"></div></div></div><div class=\"colpick_new_color\"></div><div class=\"colpick_current_color\"></div><div class=\"colpick_hex_field\"><div class=\"colpick_field_letter\">#</div><input type=\"text\" maxlength=\"6\" size=\"6\" /></div><div class=\"colpick_rgb_r colpick_field\"><div class=\"colpick_field_letter\">R</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_rgb_g colpick_field\"><div class=\"colpick_field_letter\">G</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_rgb_b colpick_field\"><div class=\"colpick_field_letter\">B</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_hsb_h colpick_field\"><div class=\"colpick_field_letter\">H</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_hsb_s colpick_field\"><div class=\"colpick_field_letter\">S</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_hsb_b colpick_field\"><div class=\"colpick_field_letter\">B</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_submit\"></div></div>',\n\t\t\tdefaults = {\n\t\t\t\tshowEvent: 'click',\n\t\t\t\tonShow: function () {},\n\t\t\t\tonBeforeShow: function(){},\n\t\t\t\tonHide: function () {},\n\t\t\t\tonChange: function () {},\n\t\t\t\tonSubmit: function () {},\n\t\t\t\tcolorScheme: 'light',\n\t\t\t\tcolor: '3289c7',\n\t\t\t\tlivePreview: true,\n\t\t\t\tflat: false,\n\t\t\t\tlayout: 'full',\n\t\t\t\tsubmit: 1,\n\t\t\t\tsubmitText: 'OK',\n\t\t\t\theight: 156\n\t\t\t},\n\t\t\t//Fill the inputs of the plugin\n\t\t\tfillRGBFields = function  (hsb, cal) {\n\t\t\t\tvar rgb = hsbToRgb(hsb);\n\t\t\t\t$(cal).data('colpick').fields\n\t\t\t\t\t.eq(1).val(rgb.r).end()\n\t\t\t\t\t.eq(2).val(rgb.g).end()\n\t\t\t\t\t.eq(3).val(rgb.b).end();\n\t\t\t},\n\t\t\tfillHSBFields = function  (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').fields\n\t\t\t\t\t.eq(4).val(Math.round(hsb.h)).end()\n\t\t\t\t\t.eq(5).val(Math.round(hsb.s)).end()\n\t\t\t\t\t.eq(6).val(Math.round(hsb.b)).end();\n\t\t\t},\n\t\t\tfillHexFields = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').fields.eq(0).val(hsbToHex(hsb));\n\t\t\t},\n\t\t\t//Set the round selector position\n\t\t\tsetSelector = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').selector.css('backgroundColor', '#' + hsbToHex({h: hsb.h, s: 100, b: 100}));\n\t\t\t\t$(cal).data('colpick').selectorIndic.css({\n\t\t\t\t\tleft: parseInt($(cal).data('colpick').height * hsb.s/100, 10),\n\t\t\t\t\ttop: parseInt($(cal).data('colpick').height * (100-hsb.b)/100, 10)\n\t\t\t\t});\n\t\t\t},\n\t\t\t//Set the hue selector position\n\t\t\tsetHue = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').hue.css('top', parseInt($(cal).data('colpick').height - $(cal).data('colpick').height * hsb.h/360, 10));\n\t\t\t},\n\t\t\t//Set current and new colors\n\t\t\tsetCurrentColor = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').currentColor.css('backgroundColor', '#' + hsbToHex(hsb));\n\t\t\t},\n\t\t\tsetNewColor = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').newColor.css('backgroundColor', '#' + hsbToHex(hsb));\n\t\t\t},\n\t\t\t//Called when the new color is changed\n\t\t\tchange = function (ev) {\n\t\t\t\tvar cal = $(this).parent().parent(), col;\n\t\t\t\tif (this.parentNode.className.indexOf('_hex') > 0) {\n\t\t\t\t\tcal.data('colpick').color = col = hexToHsb(fixHex(this.value));\n\t\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\t} else if (this.parentNode.className.indexOf('_hsb') > 0) {\n\t\t\t\t\tcal.data('colpick').color = col = fixHSB({\n\t\t\t\t\t\th: parseInt(cal.data('colpick').fields.eq(4).val(), 10),\n\t\t\t\t\t\ts: parseInt(cal.data('colpick').fields.eq(5).val(), 10),\n\t\t\t\t\t\tb: parseInt(cal.data('colpick').fields.eq(6).val(), 10)\n\t\t\t\t\t});\n\t\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\t} else {\n\t\t\t\t\tcal.data('colpick').color = col = rgbToHsb(fixRGB({\n\t\t\t\t\t\tr: parseInt(cal.data('colpick').fields.eq(1).val(), 10),\n\t\t\t\t\t\tg: parseInt(cal.data('colpick').fields.eq(2).val(), 10),\n\t\t\t\t\t\tb: parseInt(cal.data('colpick').fields.eq(3).val(), 10)\n\t\t\t\t\t}));\n\t\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\t}\n\t\t\t\tsetSelector(col, cal.get(0));\n\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t\tcal.data('colpick').onChange.apply(cal.parent(), [col, hsbToHex(col), hsbToRgb(col), cal.data('colpick').el, 0]);\n\t\t\t},\n\t\t\t//Change style on blur and on focus of inputs\n\t\t\tblur = function (ev) {\n\t\t\t\t$(this).parent().removeClass('colpick_focus');\n\t\t\t},\n\t\t\tfocus = function () {\n\t\t\t\t$(this).parent().parent().data('colpick').fields.parent().removeClass('colpick_focus');\n\t\t\t\t$(this).parent().addClass('colpick_focus');\n\t\t\t},\n\t\t\t//Increment/decrement arrows functions\n\t\t\tdownIncrement = function (ev) {\n\t\t\t\tev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n\t\t\t\tvar field = $(this).parent().find('input').focus();\n\t\t\t\tvar current = {\n\t\t\t\t\tel: $(this).parent().addClass('colpick_slider'),\n\t\t\t\t\tmax: this.parentNode.className.indexOf('_hsb_h') > 0 ? 360 : (this.parentNode.className.indexOf('_hsb') > 0 ? 100 : 255),\n\t\t\t\t\ty: ev.pageY,\n\t\t\t\t\tfield: field,\n\t\t\t\t\tval: parseInt(field.val(), 10),\n\t\t\t\t\tpreview: $(this).parent().parent().data('colpick').livePreview\n\t\t\t\t};\n\t\t\t\t$(document).mouseup(current, upIncrement);\n\t\t\t\t$(document).mousemove(current, moveIncrement);\n\t\t\t},\n\t\t\tmoveIncrement = function (ev) {\n\t\t\t\tev.data.field.val(Math.max(0, Math.min(ev.data.max, parseInt(ev.data.val - ev.pageY + ev.data.y, 10))));\n\t\t\t\tif (ev.data.preview) {\n\t\t\t\t\tchange.apply(ev.data.field.get(0), [true]);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupIncrement = function (ev) {\n\t\t\t\tchange.apply(ev.data.field.get(0), [true]);\n\t\t\t\tev.data.el.removeClass('colpick_slider').find('input').focus();\n\t\t\t\t$(document).off('mouseup', upIncrement);\n\t\t\t\t$(document).off('mousemove', moveIncrement);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t//Hue slider functions\n\t\t\tdownHue = function (ev) {\n\t\t\t\tev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n\t\t\t\tvar current = {\n\t\t\t\t\tcal: $(this).parent(),\n\t\t\t\t\ty: $(this).offset().top\n\t\t\t\t};\n\t\t\t\t$(document).on('mouseup touchend',current,upHue);\n\t\t\t\t$(document).on('mousemove touchmove',current,moveHue);\n\n\t\t\t\tvar pageY = ((ev.type == 'touchstart') ? ev.originalEvent.changedTouches[0].pageY : ev.pageY );\n\t\t\t\tchange.apply(\n\t\t\t\t\tcurrent.cal.data('colpick')\n\t\t\t\t\t.fields.eq(4).val(parseInt(360*(current.cal.data('colpick').height - (pageY - current.y))/current.cal.data('colpick').height, 10))\n\t\t\t\t\t\t.get(0),\n\t\t\t\t\t[current.cal.data('colpick').livePreview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tmoveHue = function (ev) {\n\t\t\t\tvar pageY = ((ev.type == 'touchmove') ? ev.originalEvent.changedTouches[0].pageY : ev.pageY );\n\t\t\t\tchange.apply(\n\t\t\t\t\tev.data.cal.data('colpick')\n\t\t\t\t\t.fields.eq(4).val(parseInt(360*(ev.data.cal.data('colpick').height - Math.max(0,Math.min(ev.data.cal.data('colpick').height,(pageY - ev.data.y))))/ev.data.cal.data('colpick').height, 10))\n\t\t\t\t\t\t.get(0),\n\t\t\t\t\t[ev.data.preview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupHue = function (ev) {\n\t\t\t\tfillRGBFields(ev.data.cal.data('colpick').color, ev.data.cal.get(0));\n\t\t\t\tfillHexFields(ev.data.cal.data('colpick').color, ev.data.cal.get(0));\n\t\t\t\t$(document).off('mouseup touchend',upHue);\n\t\t\t\t$(document).off('mousemove touchmove',moveHue);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t//Color selector functions\n\t\t\tdownSelector = function (ev) {\n\t\t\t\tev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n\t\t\t\tvar current = {\n\t\t\t\t\tcal: $(this).parent(),\n\t\t\t\t\tpos: $(this).offset()\n\t\t\t\t};\n\t\t\t\tcurrent.preview = current.cal.data('colpick').livePreview;\n\n\t\t\t\t$(document).on('mouseup touchend',current,upSelector);\n\t\t\t\t$(document).on('mousemove touchmove',current,moveSelector);\n\n\t\t\t\tvar payeX,pageY;\n\t\t\t\tif(ev.type == 'touchstart') {\n\t\t\t\t\tpageX = ev.originalEvent.changedTouches[0].pageX,\n\t\t\t\t\tpageY = ev.originalEvent.changedTouches[0].pageY;\n\t\t\t\t} else {\n\t\t\t\t\tpageX = ev.pageX;\n\t\t\t\t\tpageY = ev.pageY;\n\t\t\t\t}\n\n\t\t\t\tchange.apply(\n\t\t\t\t\tcurrent.cal.data('colpick').fields\n\t\t\t\t\t.eq(6).val(parseInt(100*(current.cal.data('colpick').height - (pageY - current.pos.top))/current.cal.data('colpick').height, 10)).end()\n\t\t\t\t\t.eq(5).val(parseInt(100*(pageX - current.pos.left)/current.cal.data('colpick').height, 10))\n\t\t\t\t\t.get(0),\n\t\t\t\t\t[current.preview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tmoveSelector = function (ev) {\n\t\t\t\tvar payeX,pageY;\n\t\t\t\tif(ev.type == 'touchmove') {\n\t\t\t\t\tpageX = ev.originalEvent.changedTouches[0].pageX,\n\t\t\t\t\tpageY = ev.originalEvent.changedTouches[0].pageY;\n\t\t\t\t} else {\n\t\t\t\t\tpageX = ev.pageX;\n\t\t\t\t\tpageY = ev.pageY;\n\t\t\t\t}\n\n\t\t\t\tchange.apply(\n\t\t\t\t\tev.data.cal.data('colpick').fields\n\t\t\t\t\t.eq(6).val(parseInt(100*(ev.data.cal.data('colpick').height - Math.max(0,Math.min(ev.data.cal.data('colpick').height,(pageY - ev.data.pos.top))))/ev.data.cal.data('colpick').height, 10)).end()\n\t\t\t\t\t.eq(5).val(parseInt(100*(Math.max(0,Math.min(ev.data.cal.data('colpick').height,(pageX - ev.data.pos.left))))/ev.data.cal.data('colpick').height, 10))\n\t\t\t\t\t.get(0),\n\t\t\t\t\t[ev.data.preview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupSelector = function (ev) {\n\t\t\t\tfillRGBFields(ev.data.cal.data('colpick').color, ev.data.cal.get(0));\n\t\t\t\tfillHexFields(ev.data.cal.data('colpick').color, ev.data.cal.get(0));\n\t\t\t\t$(document).off('mouseup touchend',upSelector);\n\t\t\t\t$(document).off('mousemove touchmove',moveSelector);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t//Submit button\n\t\t\tclickSubmit = function (ev) {\n\t\t\t\tvar cal = $(this).parent();\n\t\t\t\tvar col = cal.data('colpick').color;\n\t\t\t\tcal.data('colpick').origColor = col;\n\t\t\t\tsetCurrentColor(col, cal.get(0));\n\t\t\t\tcal.data('colpick').onSubmit(col, hsbToHex(col), hsbToRgb(col), cal.data('colpick').el);\n\t\t\t},\n\t\t\t//Show/hide the color picker\n\t\t\tshow = function (ev) {\n\t\t\t\t// Prevent the trigger of any direct parent\n\t\t\t\tev.stopPropagation();\n\t\t\t\tvar cal = $('#' + $(this).data('colpickId'));\n\t\t\t\tcal.data('colpick').onBeforeShow.apply(this, [cal.get(0)]);\n\t\t\t\tvar pos = $(this).offset();\n\t\t\t\tvar top = pos.top + this.offsetHeight;\n\t\t\t\tvar left = pos.left;\n\t\t\t\tvar viewPort = getViewport();\n\t\t\t\tvar calW = cal.width();\n\t\t\t\tif (left + calW > viewPort.l + viewPort.w) {\n\t\t\t\t\tleft -= calW;\n\t\t\t\t}\n\t\t\t\tcal.css({left: left + 'px', top: top + 'px'});\n\t\t\t\tif (cal.data('colpick').onShow.apply(this, [cal.get(0)]) != false) {\n\t\t\t\t\tcal.show();\n\t\t\t\t}\n\t\t\t\t//Hide when user clicks outside\n\t\t\t\t$('html').mousedown({cal:cal}, hide);\n\t\t\t\tcal.mousedown(function(ev){ev.stopPropagation();})\n\t\t\t},\n\t\t\thide = function (ev) {\n\t\t\t\tif (ev.data.cal.data('colpick').onHide.apply(this, [ev.data.cal.get(0)]) != false) {\n\t\t\t\t\tev.data.cal.hide();\n\t\t\t\t}\n\t\t\t\t$('html').off('mousedown', hide);\n\t\t\t},\n\t\t\tgetViewport = function () {\n\t\t\t\tvar m = document.compatMode == 'CSS1Compat';\n\t\t\t\treturn {\n\t\t\t\t\tl : window.pageXOffset || (m ? document.documentElement.scrollLeft : document.body.scrollLeft),\n\t\t\t\t\tw : window.innerWidth || (m ? document.documentElement.clientWidth : document.body.clientWidth)\n\t\t\t\t};\n\t\t\t},\n\t\t\t//Fix the values if the user enters a negative or high value\n\t\t\tfixHSB = function (hsb) {\n\t\t\t\treturn {\n\t\t\t\t\th: Math.min(360, Math.max(0, hsb.h)),\n\t\t\t\t\ts: Math.min(100, Math.max(0, hsb.s)),\n\t\t\t\t\tb: Math.min(100, Math.max(0, hsb.b))\n\t\t\t\t};\n\t\t\t},\n\t\t\tfixRGB = function (rgb) {\n\t\t\t\treturn {\n\t\t\t\t\tr: Math.min(255, Math.max(0, rgb.r)),\n\t\t\t\t\tg: Math.min(255, Math.max(0, rgb.g)),\n\t\t\t\t\tb: Math.min(255, Math.max(0, rgb.b))\n\t\t\t\t};\n\t\t\t},\n\t\t\tfixHex = function (hex) {\n\t\t\t\tvar len = 6 - hex.length;\n\t\t\t\tif (len > 0) {\n\t\t\t\t\tvar o = [];\n\t\t\t\t\tfor (var i=0; i<len; i++) {\n\t\t\t\t\t\to.push('0');\n\t\t\t\t\t}\n\t\t\t\t\to.push(hex);\n\t\t\t\t\thex = o.join('');\n\t\t\t\t}\n\t\t\t\treturn hex;\n\t\t\t},\n\t\t\trestoreOriginal = function () {\n\t\t\t\tvar cal = $(this).parent();\n\t\t\t\tvar col = cal.data('colpick').origColor;\n\t\t\t\tcal.data('colpick').color = col;\n\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\tsetSelector(col, cal.get(0));\n\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t};\n\t\treturn {\n\t\t\tinit: function (opt) {\n\t\t\t\topt = $.extend({}, defaults, opt||{});\n\t\t\t\t//Set color\n\t\t\t\tif (typeof opt.color == 'string') {\n\t\t\t\t\topt.color = hexToHsb(opt.color);\n\t\t\t\t} else if (opt.color.r != undefined && opt.color.g != undefined && opt.color.b != undefined) {\n\t\t\t\t\topt.color = rgbToHsb(opt.color);\n\t\t\t\t} else if (opt.color.h != undefined && opt.color.s != undefined && opt.color.b != undefined) {\n\t\t\t\t\topt.color = fixHSB(opt.color);\n\t\t\t\t} else {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\t//For each selected DOM element\n\t\t\t\treturn this.each(function () {\n\t\t\t\t\t//If the element does not have an ID\n\t\t\t\t\tif (!$(this).data('colpickId')) {\n\t\t\t\t\t\tvar options = $.extend({}, opt);\n\t\t\t\t\t\toptions.origColor = opt.color;\n\t\t\t\t\t\t//Generate and assign a random ID\n\t\t\t\t\t\tvar id = 'collorpicker_' + parseInt(Math.random() * 1000);\n\t\t\t\t\t\t$(this).data('colpickId', id);\n\t\t\t\t\t\t//Set the tpl's ID and get the HTML\n\t\t\t\t\t\tvar cal = $(tpl).attr('id', id);\n\t\t\t\t\t\t//Add class according to layout\n\t\t\t\t\t\tcal.addClass('colpick_'+options.layout+(options.submit?'':' colpick_'+options.layout+'_ns'));\n\t\t\t\t\t\t//Add class if the color scheme is not default\n\t\t\t\t\t\tif(options.colorScheme != 'light') {\n\t\t\t\t\t\t\tcal.addClass('colpick_'+options.colorScheme);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//Setup submit button\n\t\t\t\t\t\tcal.find('div.colpick_submit').html(options.submitText).click(clickSubmit);\n\t\t\t\t\t\t//Setup input fields\n\t\t\t\t\t\toptions.fields = cal.find('input').change(change).blur(blur).focus(focus);\n\t\t\t\t\t\tcal.find('div.colpick_field_arrs').mousedown(downIncrement).end().find('div.colpick_current_color').click(restoreOriginal);\n\t\t\t\t\t\t//Setup hue selector\n\t\t\t\t\t\toptions.selector = cal.find('div.colpick_color').on('mousedown touchstart',downSelector);\n\t\t\t\t\t\toptions.selectorIndic = options.selector.find('div.colpick_selector_outer');\n\t\t\t\t\t\t//Store parts of the plugin\n\t\t\t\t\t\toptions.el = this;\n\t\t\t\t\t\toptions.hue = cal.find('div.colpick_hue_arrs');\n\t\t\t\t\t\thuebar = options.hue.parent();\n\t\t\t\t\t\t//Paint the hue bar\n\t\t\t\t\t\tvar UA = navigator.userAgent.toLowerCase();\n\t\t\t\t\t\tvar isIE = navigator.appName === 'Microsoft Internet Explorer';\n\t\t\t\t\t\tvar IEver = isIE ? parseFloat( UA.match( /msie ([0-9]{1,}[\\.0-9]{0,})/ )[1] ) : 0;\n\t\t\t\t\t\tvar ngIE = ( isIE && IEver < 10 );\n\t\t\t\t\t\tvar stops = ['#ff0000','#ff0080','#ff00ff','#8000ff','#0000ff','#0080ff','#00ffff','#00ff80','#00ff00','#80ff00','#ffff00','#ff8000','#ff0000'];\n\t\t\t\t\t\tif(ngIE) {\n\t\t\t\t\t\t\tvar i, div;\n\t\t\t\t\t\t\tfor(i=0; i<=11; i++) {\n\t\t\t\t\t\t\t\tdiv = $('<div></div>').attr('style','height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+stops[i]+', endColorstr='+stops[i+1]+'); -ms-filter: \"progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+stops[i]+', endColorstr='+stops[i+1]+')\";');\n\t\t\t\t\t\t\t\thuebar.append(div);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstopList = stops.join(',');\n\t\t\t\t\t\t\thuebar.attr('style','background:-webkit-linear-gradient(top,'+stopList+'); background: -o-linear-gradient(top,'+stopList+'); background: -ms-linear-gradient(top,'+stopList+'); background:-moz-linear-gradient(top,'+stopList+'); -webkit-linear-gradient(top,'+stopList+'); background:linear-gradient(to bottom,'+stopList+'); ');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcal.find('div.colpick_hue').on('mousedown touchstart',downHue);\n\t\t\t\t\t\toptions.newColor = cal.find('div.colpick_new_color');\n\t\t\t\t\t\toptions.currentColor = cal.find('div.colpick_current_color');\n\t\t\t\t\t\t//Store options and fill with default color\n\t\t\t\t\t\tcal.data('colpick', options);\n\t\t\t\t\t\tfillRGBFields(options.color, cal.get(0));\n\t\t\t\t\t\tfillHSBFields(options.color, cal.get(0));\n\t\t\t\t\t\tfillHexFields(options.color, cal.get(0));\n\t\t\t\t\t\tsetHue(options.color, cal.get(0));\n\t\t\t\t\t\tsetSelector(options.color, cal.get(0));\n\t\t\t\t\t\tsetCurrentColor(options.color, cal.get(0));\n\t\t\t\t\t\tsetNewColor(options.color, cal.get(0));\n\t\t\t\t\t\t//Append to body if flat=false, else show in place\n\t\t\t\t\t\tif (options.flat) {\n\t\t\t\t\t\t\tcal.appendTo(this).show();\n\t\t\t\t\t\t\tcal.css({\n\t\t\t\t\t\t\t\tposition: 'relative',\n\t\t\t\t\t\t\t\tdisplay: 'block'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcal.appendTo(document.body);\n\t\t\t\t\t\t\t$(this).on(options.showEvent, show);\n\t\t\t\t\t\t\t$(this).on('focus', show);\n\t\t\t\t\t\t\tcal.css({\n\t\t\t\t\t\t\t\tposition:'absolute'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//Shows the picker\n\t\t\tshowPicker: function() {\n\t\t\t\treturn this.each( function () {\n\t\t\t\t\tif ($(this).data('colpickId')) {\n\t\t\t\t\t\tshow.apply(this);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//Hides the picker\n\t\t\thidePicker: function() {\n\t\t\t\treturn this.each( function () {\n\t\t\t\t\tif ($(this).data('colpickId')) {\n\t\t\t\t\t\t$('#' + $(this).data('colpickId')).hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//Sets a color as new and current (default)\n\t\t\tsetColor: function(col, setCurrent) {\n\t\t\t\tsetCurrent = (typeof setCurrent === \"undefined\") ? 1 : setCurrent;\n\t\t\t\tif (typeof col == 'string') {\n\t\t\t\t\tcol = hexToHsb(col);\n\t\t\t\t} else if (col.r != undefined && col.g != undefined && col.b != undefined) {\n\t\t\t\t\tcol = rgbToHsb(col);\n\t\t\t\t} else if (col.h != undefined && col.s != undefined && col.b != undefined) {\n\t\t\t\t\tcol = fixHSB(col);\n\t\t\t\t} else {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\treturn this.each(function(){\n\t\t\t\t\tif ($(this).data('colpickId')) {\n\t\t\t\t\t\tvar cal = $('#' + $(this).data('colpickId'));\n\t\t\t\t\t\tcal.data('colpick').color = col;\n\t\t\t\t\t\tcal.data('colpick').origColor = col;\n\t\t\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\t\t\tsetSelector(col, cal.get(0));\n\n\t\t\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t\t\t\tcal.data('colpick').onChange.apply(cal.parent(), [col, hsbToHex(col), hsbToRgb(col), cal.data('colpick').el, 1]);\n\t\t\t\t\t\tif(setCurrent) {\n\t\t\t\t\t\t\tsetCurrentColor(col, cal.get(0));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}();\n\t//Color space convertions\n\tvar hexToRgb = function (hex) {\n\t\tvar hex = parseInt(((hex.indexOf('#') > -1) ? hex.substring(1) : hex), 16);\n\t\treturn {r: hex >> 16, g: (hex & 0x00FF00) >> 8, b: (hex & 0x0000FF)};\n\t};\n\tvar hexToHsb = function (hex) {\n\t\treturn rgbToHsb(hexToRgb(hex));\n\t};\n\tvar rgbToHsb = function (rgb) {\n\t\tvar hsb = {h: 0, s: 0, b: 0};\n\t\tvar min = Math.min(rgb.r, rgb.g, rgb.b);\n\t\tvar max = Math.max(rgb.r, rgb.g, rgb.b);\n\t\tvar delta = max - min;\n\t\thsb.b = max;\n\t\thsb.s = max != 0 ? 255 * delta / max : 0;\n\t\tif (hsb.s != 0) {\n\t\t\tif (rgb.r == max) hsb.h = (rgb.g - rgb.b) / delta;\n\t\t\telse if (rgb.g == max) hsb.h = 2 + (rgb.b - rgb.r) / delta;\n\t\t\telse hsb.h = 4 + (rgb.r - rgb.g) / delta;\n\t\t} else hsb.h = -1;\n\t\thsb.h *= 60;\n\t\tif (hsb.h < 0) hsb.h += 360;\n\t\thsb.s *= 100/255;\n\t\thsb.b *= 100/255;\n\t\treturn hsb;\n\t};\n\tvar hsbToRgb = function (hsb) {\n\t\tvar rgb = {};\n\t\tvar h = hsb.h;\n\t\tvar s = hsb.s*255/100;\n\t\tvar v = hsb.b*255/100;\n\t\tif(s == 0) {\n\t\t\trgb.r = rgb.g = rgb.b = v;\n\t\t} else {\n\t\t\tvar t1 = v;\n\t\t\tvar t2 = (255-s)*v/255;\n\t\t\tvar t3 = (t1-t2)*(h%60)/60;\n\t\t\tif(h==360) h = 0;\n\t\t\tif(h<60) {rgb.r=t1;\trgb.b=t2; rgb.g=t2+t3}\n\t\t\telse if(h<120) {rgb.g=t1; rgb.b=t2;\trgb.r=t1-t3}\n\t\t\telse if(h<180) {rgb.g=t1; rgb.r=t2;\trgb.b=t2+t3}\n\t\t\telse if(h<240) {rgb.b=t1; rgb.r=t2;\trgb.g=t1-t3}\n\t\t\telse if(h<300) {rgb.b=t1; rgb.g=t2;\trgb.r=t2+t3}\n\t\t\telse if(h<360) {rgb.r=t1; rgb.g=t2;\trgb.b=t1-t3}\n\t\t\telse {rgb.r=0; rgb.g=0;\trgb.b=0}\n\t\t}\n\t\treturn {r:Math.round(rgb.r), g:Math.round(rgb.g), b:Math.round(rgb.b)};\n\t};\n\tvar rgbToHex = function (rgb) {\n\t\tvar hex = [\n\t\t\trgb.r.toString(16),\n\t\t\trgb.g.toString(16),\n\t\t\trgb.b.toString(16)\n\t\t];\n\t\t$.each(hex, function (nr, val) {\n\t\t\tif (val.length == 1) {\n\t\t\t\thex[nr] = '0' + val;\n\t\t\t}\n\t\t});\n\t\treturn hex.join('');\n\t};\n\tvar hsbToHex = function (hsb) {\n\t\treturn rgbToHex(hsbToRgb(hsb));\n\t};\n\t$.fn.extend({\n\t\tcolpick: colpick.init,\n\t\tcolpickHide: colpick.hidePicker,\n\t\tcolpickShow: colpick.showPicker,\n\t\tcolpickSetColor: colpick.setColor\n\t});\n\t$.extend({\n\t\tcolpick:{\n\t\t\trgbToHex: rgbToHex,\n\t\t\trgbToHsb: rgbToHsb,\n\t\t\thsbToHex: hsbToHex,\n\t\t\thsbToRgb: hsbToRgb,\n\t\t\thexToHsb: hexToHsb,\n\t\t\thexToRgb: hexToRgb\n\t\t}\n\t});\n})(jQuery);\n","app.search = $(function() {\n  var pastSearches = [];\n\n  loadSearches();\n\n  showPopularResults();\n\n\n  ////////////////////////////////////////////////////////////////////////////////\n  //LOADING PAST SEARCHES FROM LOCAL STORAGE\n\n  function loadSearches () {\n   pastSearches = JSON.parse(localStorage.getItem('pastSearches') || '[]');\n   return pastSearches;\n  }\n\n\n  ////////////////////////////////////////////////////////////////////////////////\n  //ADDING EVENT HANDLER FOR LOADING PAST RESULTS AND RENDERING AS HTML\n\n  function pastSearchesToHtml (pastSearches) {\n    return pastSearches.map(function (pastSearch) {\n      var keyword = pastSearch.keywordSearch;\n      var color =  pastSearch.colorSearch;\n      var product = pastSearch.productSearch.slice(10);\n\n      var colorBlock = $('<span class=\"color-block\"></span>');\n      colorBlock.css('background-color', '#' + color);\n\n      var searchItem = $('<li class=\"past-search-item\"></li>');\n      searchItem.attr('data-keyword', keyword);\n      searchItem.attr('data-color', color);\n      searchItem.attr('data-product', pastSearch.productSearch);\n\n      searchItem.append(product + ' ');\n      searchItem.append(keyword + ' ');\n      searchItem.append(colorBlock);\n\n      return searchItem[0];\n    });\n  }\n\n  function pastSearchesToPage () {\n    pastSearches = loadSearches();\n    if (pastSearches.length === 0) {\n      $('.past-searches-list').empty().append('<li class=\"past-search-item\">You don\\'t currently have any past searches</li>');\n    } else {\n      searchItems = pastSearchesToHtml(pastSearches);\n      $('.past-searches-list').empty().append(searchItems);\n    }\n  }\n\n  $('.past-searches').on('click', function (e) {\n    e.stopPropagation();\n    pastSearchesToPage();\n    $('.past-searches-list').toggleClass('show');\n    $('body').on('click', function (e) {\n      e.stopPropagation();\n      $('.past-searches-list').removeClass('show');\n    });\n  });\n\n  function viewPastSearch () {\n    $('.past-searches-list').on('click', '.past-search-item', function () {\n      var pastSearchItem = $(this);\n\n      //grab the values of the search options, change them if there is a value\n      var keywordSearch = '';\n      var keyword = pastSearchItem.attr('data-keyword');\n\n      if (keyword !== '') {\n       // keyword = keyword.split(' ').join('%20');\n       //not sure that is necessary\n        keywordSearch = 'q=' + keyword;\n      }\n\n      var colorSearch = '';\n      var color = pastSearchItem.attr('data-color');\n      if (color !== '') {\n        colorSearch = 'color1=' + color;\n      }\n\n      var productSearch = '';\n      //looking for a checked product button, if exists, resets product variable\n      var product = pastSearchItem.attr('data-product');\n      if (product !== '') {\n          productSearch = product;\n      }\n\n      printSearchResults(keywordSearch, colorSearch, productSearch);\n    });\n\n  }\n\n  viewPastSearch();\n\n\n  ////////////////////////////////////////////////////////////////////////////////\n  //ADD CLASS TO SELECTED RADIO LABEL\n\n  $('.product-label').on('click', function () {\n    $('.product-label').removeClass('selected');\n    $(this).addClass('selected');\n  });\n\n  ////////////////////////////////////////////////////////////////////////////////\n //GET 40 MOST POPULAR TO DISPLAY ON LOAD\n\n function showPopularResults() {\n   Api.getPopularList().done(function(response) {\n     var results = response.results[0].results;\n     var resultElements = apiResultsToHtml(results);\n     $('.results-list').empty().append(resultElements);\n   });\n }\n\n\n  ////////////////////////////////////////////////////////////////////////////////\n  //COLOR PICKER FUNCTIONALITY\n\n   $('#picker').colpick({\n     // flat: true,\n     layout: 'hex',\n     submit: 0,\n     colorScheme: 'light',\n     onChange: function(hsb, hex, rgb, el, bySetColor) {\n       $(el).css('border-color', '#' + hex);\n       // Fill the text box just if the color was set using the picker,\n       // and not the colpickSetColor function.\n       if (!bySetColor) $(el).val(hex);\n     }\n   }).keyup(function() {\n     $(this).colpickSetColor(this.value);\n   });\n\n\n   ////////////////////////////////////////////////////////////////////////////////\n   //GET BY SEARCH CRITERIA\n\n   function runSearch () {\n     $('.new-search').submit(function(e) {\n       e.preventDefault();\n\n       //grab the values of the search options, change them if there is a value\n       var keywordSearch = '';\n       var keyword = $('.keyword').val();\n       if (keyword !== '') {\n        // keyword = keyword.split(' ').join('%20');\n        //not sure that is necessary\n         keywordSearch = 'q=' + keyword;\n       }\n\n       var colorSearch = '';\n       var color = $('.color').val();\n       if (color !== '') {\n         colorSearch = 'color1=' + color;\n       }\n\n       var productSearch = '';\n       //looking for a checked product button, if exists, resets product variable\n       var checked = $('.product-section input[type=radio]:checked');\n       if (checked.length > 0) {\n           productSearch = 'substrate=' + checked.val();\n       }\n\n       ////////////////////////////////////////////////////////////////////////////////\n       //SAVING PAST SEARCHES TO LOCAL STORAGE\n       var search = {\n         keywordSearch: keyword,\n         colorSearch: color,\n         productSearch: productSearch,\n       };\n\n\n      function saveSearches () {\n      //NOT CERTAIN WHY THIS IS NOT WORKING, HAVE TRIED OTHER THINGS SUCH AS\n      //.CONTAINS BUT TO NO AVAIL\n       if (pastSearches.indexOf(search) < 0) {\n         pastSearches.unshift(search);\n       }\n\n       if (pastSearches.length > 5) {\n           pastSearches.pop();\n         }\n        localStorage.setItem('pastSearches', JSON.stringify(pastSearches))\n      }\n\n      saveSearches();\n\n\n     printSearchResults(keywordSearch, productSearch, colorSearch);\n\n     });\n  }\n\n  runSearch();\n\n  ////////////////////////////////////////////////////////////////////////////////\n  //API CALL WITH SEARCH CRITERIA\n\n  function printSearchResults (keywordSearch, productSearch, colorSearch) {\n   Api.getDesignBySearch(keywordSearch, productSearch, colorSearch).done(function(response) {\n     var results = response.results[0].results;\n     var resultElements = apiResultsToHtml(results);\n     if (results.length === 0) {\n       $('.results-list').empty().append('<i class=\"fa fa-frown-o\"></i> There are no fabrics matching your search. Please try again.');\n       $('.results-list').addClass('error');\n     } else {\n       $('.results-list').empty().append(resultElements);\n     }\n\n   });\n }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  //Translate API calls to html\n\n  function apiResultsToHtml(results) {\n\n    return results.map(function(designItem) {\n      var img = $('<img>');\n      img.attr('data-id', designItem.id);\n      img.attr('src', designItem.thumbnail_url);\n\n      var imgCont = $('<div class=\"design-img-container\"></div>');\n      imgCont.append(img);\n\n      var designName = $('<div class=\"design-name-container\"><h3 class=\"design-name\">' + designItem.name + '</h3></div>');\n\n      var designer = $('<div class=\"designer-container\"><span class=\"designer\">by ' + designItem.user.screen_name + '</span></div>');\n\n      var description = $('<div class=\"description-container\"><p class=\"description\">' + designItem.short_description + '</p></div>');\n\n      var li = $('<li></li>');\n      li.data('item', designItem);\n      li.addClass('design-preview search-result');\n      li.append(imgCont);\n      li.append(designName);\n      li.append(designer);\n\n      //checking to see if there is a description value before adding it to html\n      if (designItem.short_description !== '') {\n        var addDescription = li.append(description);\n        return addDescription;\n      }\n\n      return li;\n    });\n  }\n\n\n});\n"],"sourceRoot":"/source/"}